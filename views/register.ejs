<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('common/head', { title: 'Register' }) %>
  <link rel="stylesheet" href="register.css">
  <style>
    body { 
  background: url(Planet.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
}
  </style>
</head>
<body>
  <%- include('common/nav') %>
  <div class="container">
    <div class="row">
      <div class="col-sm-9 col-md-7 col-lg-5 mx-auto">
        <div class="card card-signin my-5">
          <div class="card-body">
            <h5 class="card-title text-center">Register</h5>

            <script>
              // Validates if the two entered passwords are matching.
              const validateForm = function () {
                const passwordConfirm = $('[name="passwordConfirm"]').get(0)
                const password = $('[name="newPassword"]').get(0)

                passwordConfirm.setCustomValidity(password.value != passwordConfirm.value ? "Passwords do not match." : "")
              }
            </script>


            <% if (errorMessage) {%>
              <!-- Displays error message recieved from the back-end. -->
              <div class="alert alert-danger alert-dismissible fade show">
                <strong>Error!</strong> <%= errorMessage %>
                <button type="button" class="close" data-dismiss="alert">&times;</button>
              </div>
            <% } %>

            <!-- Registration form, all inputs are required for the user to pass. -->
            <form action="/register" class="form-signin" method="POST" oninput='validateForm()'>

              <!-- Names are only allowed to contain letters and have to be atleast 2 letters long. -->
              <div class="form-group">
                <label for="firstName">First name</label>
                <input name="firstName" type="text" id="firstName" class="form-control" placeholder="First name" required pattern="[A-ZÅÄÖ].+" title="First name must begin with a capital letter and be atleast 2 letters.">

                <label for="lastName" style="margin-top: 15px" >Last name</label>
                <input name="lastName" type="text" id="lastName" class="form-control" placeholder="Last name" required pattern="[A-ZÅÄÖ].+" title="Last name must begin with a capital letter and be atleast 2 letters.">
              </div>

              <div class="form-label-group">
                <label for="inputEmail">Email address</label>
                <input name="email" type="email" id="inputEmail" class="form-control" placeholder="Email address" required pattern=".+@.+\..{2,}" title="Email must contain @ and end with a valid top-level domain like '.com' or '.se'">
              </div>

              <div class="form-label-group">
                <label for="inputPassword" style="margin-top: 15px" >Password</label>
                <input name="newPassword" type="password" id="inputPassword" class="form-control" placeholder="Password" required minlength="8" maxlength="20">
                 <p style="font-weight: normal; font-size: smaller;">Password must contain atleast 8 characters.</p>
              </div>

              <div class="form-label-group">
                <label for="inputPasswordConfirm" >Repeat password</label>
                <input name="passwordConfirm" type="password" id="inputPasswordConfirm" class="form-control" placeholder="Repeat password" required minlength="8" maxlength="20">
              </div>

              <button class="btn btn-lg btn-primary btn-block text-uppercase" style="margin-top: 15px" type="submit">Register</button>
            </form>
            <div class="mt-3 text-center">
              <a href="/login">Already have an account? Login here</a>
            </div>  
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
